# GOFR IQ Client View & Watchlist Management Proposal

**From:** Senior UK Cash Equities Sales Trader & SME  
**Date:** 02 Oct 2024  
**Subject:** Proposal for Unified 'Client 360' Dashboard & Watchlist Workflow

---

## 1. Executive Summary

As a sales trader covering institutional accounts, my screen real estate is prime property. I don't have time to tab-switch between a CRM, a pricing terminal, and a news feed when a client is on the squawk.

This proposal outlines a unified **"Client 360"** view for GOFR-IQ. The objective is simple: **Speed to Alpha**. When I query a client, I need to immediately see what they hold, what they are watching, and what news is impactful to *them* specifically. Furthermore, I need a frictionless way to maintain their interests (Watchlists) so the system can alert me when to pick up the phone.

---

## 2. The "Client 360" Dashboard View

The view should be a single pane of glass, dense with data but strictly organised. No fluff.

### 2.1 Header: The "Vitals"

*Top strip, always visible.*

* \u2705 **Client Name** & **Type** (from `get_client_profile()`)
* \ud83d\udeab **ON HOLD:** **Tier** (Platinum/Gold) - not exposed by client API
* \u2705 **Mandate Profile**: `mandate_type` from `get_client_profile()`
  * *Examples:* "GLOBAL_MACRO", "UK_HIGH_ALPHA", "ESG_STRICT"
  * \u26a0\ufe0f **ESG Flag**: `esg_constrained` boolean available, but **specific exclusions** (\"No Tobacco\", \"No Gaming\") are not exposed via API.
* \ud83d\udeab **ON HOLD:** **Coverage** (Who covers them?) - not in client profile data
* \u2705 **Turnover Rate**: May be available via `get_client_profile()` if populated in Neo4j

### 2.2 Panel A: Portfolio & Holdings (The "Book")

*Left/Centre Column - The source of truth.*

* **Data Source**: `get_portfolio_holdings(client_guid)` via MCP
* **Visualisation**:
  * Sortable grid: Ticker, Name, Weight, Shares, Avg Cost.
  * **News Heatmap**: \u2705 Visual indicators (glowing borders or status lights) on tickers that have fresh news with high impact scores (via `get_instrument_news()`).
  * \ud83d\udeab **ON HOLD:** "vs Benchmark" column - no benchmark data API.
  * \ud83d\udeab **ON HOLD:** Toggle to view by Sector/Region - no aggregation API.

### 2.3 Panel B: Watchlists & Interests (The "Shadow Book")

*Right Column - The actionable conversations.*

* **Data Source**: `get_watchlist_items(client_guid)` via MCP
* **Functionality**:
  * \u2705 **Active Watchlists**: List of tickers with alert thresholds.
  * \u2705 **Alert Levels**: Display `alert_threshold` as color-coded badge next to ticker.
  * \ud83d\udeab **ON HOLD:** Grouped by theme ("UK Banks", "Rate Sensitive") - no theme/category support in API.
  * \ud83d\udeab **ON HOLD:** "Suggested" tickers based on holdings/peers - requires recommendation engine.

### 2.4 Panel C: Interaction & Signal Stream

*Bottom/Ticker Tape - The flow.*

* **Data Source**: \u2705 `get_client_feed(client_guid, min_impact_score, impact_tiers)` via MCP
* **Functionality**: News stream filtered by client's portfolio and watchlist holdings.
* **Filter**: "Show me news aimed at [Client Portfolio] with magnitude > 70" - \u2705 Fully supported.

---

## 3. Workflow: Watchlist Maintenance ("The Blotter")

Maintaining a watchlist is currently a chore. It needs to be as fast as entering an order.

### 3.1 Quick-Add Mechanics

* üö´ **ON HOLD (Phase 2):** Global command bar with ticker entry - requires `search_tickers()` API for validation and autocomplete.
* üö´ **ON HOLD (Phase 2):** Drag & Drop from Portfolio to Watchlist.

### 3.2 The "Smart Edit" Modal

When I add an instrument or double-click a watchlist item:

1. **Alert Threshold Setting**: Slider for impact score threshold (0-100).
2. \ud83d\udeab **ON HOLD:** Price levels (Support/Resistance) - not supported by API.
3. \ud83d\udeab **ON HOLD:** Event type triggers checkboxes - not supported by watchlist API.
4. \ud83d\udeab **ON HOLD:** Expiry date ("Watch until [Date]") - not supported by `WATCHES` relationship.

### 3.3 Bulk Maintenance

* \ud83d\udeab **ON HOLD:** Import/Export (Excel/Bloomberg paste) - requires batch API operations.
* \ud83d\udeab **ON HOLD:** "Update weights from latest regulatory filing" - requires external data integration.

---

## 4. Peer Review: UX & Sales Trading Analysis

**Reviewer**: Head of Product / Ex-Equities Trader

### 4.1 Strengths (Sales Trading Perspective)

* **Compliance Safety**: Promoting the "Mandate Profile" and `EXCLUDES` constraints to the top level is a massive win. It saves embarrassing trade fails where we pitch restricted names.
* **Signal to Noise**: Filtering the news feed by the specific portfolio (via the Graph relationships) is the killer feature. Most tools just show a generic "GLEN LN" news feed. Showing "GLEN LN news *relative to* Client A's overweight position" is actionable alpha.
* **Watchlist Agility**: The command bar entry (`VOD LN <Enter>`) is exactly how traders operate. Mouse clicks are too slow during the open.

### 4.2 Critiques & Improvements (UX Perspective)

* **Information Density Risk**: Panel A (Holdings) and Panel B (Watchlists) side-by-side might be too crowded on a laptop screen.
  * *Recommendation*: Use a "Tabbed" approach for Portfolio vs. Watchlist, OR a "Master-Detail" interaction where clicking a ticker opens a drawer with both Holdings data and Watchlist status.
* **Alert Fatigue**: If a client has 500 names in their portfolio and we alert on every `AFFECTS` signal > 50, the trader will mute the application.
  * *Recommendation*: Implement a "Decay Lambda" visualizer. Show the signal fading over time. Also, standardise the "Impact Tier" colour coding (Platinum = Flashing Red, Bronze = Grey) to allow rapid scanning.
* **Missing "Reverse Inquiry"**: The proposal looks at *one* client.
  * *Recommendation*: We need a "Reverse Look-up". If I see news on *Barclays*, I need to click *Barclays* and see a list of ALL clients who hold it or watch it. That is the most common workflow for a sales trader (News -> Who cares? -> Call).

### 4.3 Technical Feasibility (Graph Check)

* All proposed data points exist in `neo4j-schema.md`.
* `ClientProfile` (`esg_constrained`, `turnover_rate`) is correctly leveraged.
* `WATCHES` relationship supports `alert_threshold`, which maps to the proposed workflow.
* *Gap Identified*: The schema implies `add_company_mention()` creates company nodes, but we need to ensure the `Instrument` -> `Company` link (`ISSUED_BY`) is robust so that news on "Shell PLC" flows to "SHEL LN" in the portfolio view.

### 4.5 Revised "Reverse Inquiry" View

*Based on peer review, we must add a secondary view:*
**"The Axe Sheet"**

* Input: Ticker (e.g., TSLA)
* Output: List of Clients sorted by:
    1. % Holdings (Who is long?)
    2. Watchlist Presence (Who is looking?)
    3. Recent Interaction (Who did we last speak to about this?)

---

**Approval Status**: APPROVED with addition of Section 4.5 (Reverse Inquiry).

---

## API Support Status Legend

* ‚úÖ **SUPPORTED** - Direct MCP API support available
* ‚ö†Ô∏è **PARTIAL** - Requires workaround or multiple API calls
* üö´ **ON HOLD** - Awaiting backend API enhancement

---

## 5. Implementation Plan (Step-by-Step)

This section breaks the "Client 360" dashboard into incremental deliverables with MCP verification at each stage.

### 5.0 Pre-Flight: MCP Communication Test ‚úÖ SUPPORTED

**Objective:** Verify MCP connectivity and authentication.
**API Status:** `health_check()` is available.

**Tasks:**

1. Implement basic MCP session management (if not already done).
2. Test `health_check()` tool.
3. Verify auth tokens are valid.

**MCP Verification:**

```bash
# Initialize session
SESSION=$(curl -s -D /tmp/headers.txt -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -d '{"jsonrpc":"2.0","id":1,"method":"initialize","params":{"protocolVersion":"2024-11-05","capabilities":{},"clientInfo":{"name":"gofr-console","version":"0.0.1"}}}' \
  > /dev/null 2>&1; grep -i "mcp-session-id:" /tmp/headers.txt | cut -d: -f2 | tr -d ' \r')

# Test health_check
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":2,"method":"tools/call","params":{"name":"health_check","arguments":{}}}'
```

**Expected Output:**

```json
{"status": "success", "data": {"neo4j": "ok", "chromadb": "ok", "llm": "ok"}}
```

**Deliverable:** `McpClient` class with session management and error handling.

---

### 5.1 Client List & Basic Details ‚úÖ SUPPORTED

**Objective:** Display list of clients with basic profile information.
**API Status:** `list_clients()` and `get_client_profile()` are available.

**Tasks:**

1. Create `ClientList` component (reusable).
2. Implement `listClients()` API wrapper in `services/api/index.ts`.
3. Implement `getClientProfile()` API wrapper.
4. Display Client Name, Type, and GUID.

**MCP Verification:**

```bash
# List clients
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":3,"method":"tools/call","params":{"name":"list_clients","arguments":{"auth_tokens":["'$TOKEN'"]}}}'

# Get client profile
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":4,"method":"tools/call","params":{"name":"get_client_profile","arguments":{"client_guid":"<VALID_GUID>","auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Data Shape:**

```json
// list_clients
{"clients": [{"guid": "uuid", "name": "Client A", "client_type": "HEDGE_FUND", "portfolio_guid": "uuid", "watchlist_guid": "uuid"}]}

// get_client_profile
{"name": "Client A", "client_type": "HEDGE_FUND", "mandate_type": "GLOBAL_MACRO", "alert_frequency": "REAL_TIME", "impact_threshold": 50, "esg_constrained": true}
```

**Deliverable:** Basic Client List view with clickable rows.

---

### 5.2 Header: "The Vitals" ‚ö†Ô∏è PARTIAL

**Objective:** Display client profile header with mandate and constraints.
**API Status:** `get_client_profile()` returns `mandate_type`, `esg_constrained`, but **EXCLUDES relationships are not exposed** via API.

**Tasks:**

1. Create `ClientHeader` component.
2. Display: Name, Type, Mandate, Alert Frequency, ESG Flag.
3. Add visual "badges" for constraints (e.g., red badge for ESG).
4. üö´ **ON HOLD:** Specific exclusions ("No Tobacco", "No Gaming") - requires `get_client_exclusions()` API.

**MCP Data Source:**

* `get_client_profile(client_guid)` ‚Üí returns `mandate_type`, `esg_constrained`, `impact_threshold`, etc.

**Design Notes:**

* Use Material UI `Chip` components for badges.
* Mandate type should be prominent (h5 typography).
* ESG flag: Red chip with "ESG Constrained" text.

**Deliverable:** `ClientHeader.tsx` with styled profile summary.

---

### 5.3 Panel A: Portfolio & Holdings (The "Book") ‚ö†Ô∏è PARTIAL

**Objective:** Display client's portfolio holdings in a sortable table.
**API Status:** `get_portfolio_holdings()` is available. Returns `ticker`, `weight`, `shares`, `avg_cost`.

**Tasks:**

1. Create `PortfolioPanel` component.
2. Implement `getPortfolioHoldings()` API wrapper.
3. Display: Ticker, Name, Weight, Shares, Avg Cost.
4. Add sorting by Weight (descending by default).
5. Add basic filtering (e.g., "Show only > 5% weight").
6. üö´ **ON HOLD:** "vs Benchmark" column - requires benchmark portfolio data API.
7. üö´ **ON HOLD:** Sector/Region aggregation toggle - requires `get_portfolio_by_sector()` API.

**MCP Verification:**

```bash
# Get portfolio holdings
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":5,"method":"tools/call","params":{"name":"get_portfolio_holdings","arguments":{"client_guid":"<VALID_GUID>","auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Data Shape:**

```json
{"holdings": [{"ticker": "AAPL", "name": "Apple Inc.", "weight": 0.15, "shares": 1000, "avg_cost": 150.00}]}
```

**Design Notes:**

* Use Material UI `DataGrid` or custom table.
* Weight should be displayed as percentage (15.0%).
* Add "Total" row at bottom (100%).

**Deliverable:** `PortfolioPanel.tsx` with sortable holdings table.

---

### 5.4 Panel B: Watchlists & Interests (The "Shadow Book") ‚ö†Ô∏è PARTIAL

**Objective:** Display client's watchlist items with alert thresholds.
**API Status:** `get_watchlist_items()` is available. Returns `ticker`, `alert_threshold`.

**Tasks:**

1. Create `WatchlistPanel` component.
2. Implement `getWatchlistItems()` API wrapper.
3. Display: Ticker, Alert Threshold.
4. üö´ **ON HOLD:** "Grouped by theme" logic - watchlist API does not support themes/categories.
5. üö´ **ON HOLD:** "Suggested" tickers based on holdings/peers - requires recommendation engine API.

**MCP Verification:**

```bash
# Get watchlist items
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":6,"method":"tools/call","params":{"name":"get_watchlist_items","arguments":{"client_guid":"<VALID_GUID>","auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Data Shape:**

```json
{"watchlist": [{"ticker": "TSLA", "alert_threshold": 70}]}
```

**Design Notes:**

* Display alert threshold as badge next to ticker.
* Color code by threshold level (e.g., >80 = Red, 50-80 = Amber, <50 = Green).

**Deliverable:** `WatchlistPanel.tsx` with ticker list and alert levels.

---

### 5.5 News Heatmap & Impact Signals ‚úÖ SUPPORTED

**Objective:** Visualize news impact on portfolio holdings.
**API Status:** `get_instrument_news()` is available. Returns articles with `impact_score`, `impact_tier`.

**Tasks:**

1. Implement `getInstrumentNews()` API wrapper.
2. For each holding in Portfolio, fetch recent news (last 7 days).
3. Add visual indicator (border glow, icon) if news impact > threshold.
4. Cache news data to avoid excessive MCP calls.

**MCP Verification:**

```bash
# Get instrument news for a ticker
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":7,"method":"tools/call","params":{"name":"get_instrument_news","arguments":{"ticker":"AAPL","days_back":7,"min_impact_score":50,"auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Data Shape:**

```json
{"ticker": "AAPL", "articles": [{"guid": "uuid", "title": "Apple announces...", "impact_score": 85, "impact_tier": "GOLD"}], "total_found": 5}
```

**Design Notes:**

* Use `impact_tier` to color code (PLATINUM = Red pulse, GOLD = Amber, SILVER = Blue).
* Show count badge (e.g., "3 alerts").

**Deliverable:** Enhanced `PortfolioPanel.tsx` with news indicators.

---

### 5.6 Watchlist Maintenance: Quick-Add Command Bar üö´ ON HOLD

**Objective:** Enable fast ticker entry to add to watchlist.
**API Status:** `add_to_watchlist()` exists but **requires `search_tickers()` API** for ticker validation and autocomplete.

**Phase 2 Tasks:**

1. Create `CommandBar` component (global or in ClientView).
2. Implement ticker autocomplete using `search_tickers()` API.
3. On `Enter`, validate ticker and call `addToWatchlist()` API.
4. Display confirmation toast.

**Blocked By:** No `search_tickers(prefix)` API available.

**MCP Verification:**

```bash
# Add to watchlist
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":8,"method":"tools/call","params":{"name":"add_to_watchlist","arguments":{"client_guid":"<VALID_GUID>","ticker":"VOD","alert_threshold":60,"auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Response:**

```json
{"ticker": "VOD", "alert_threshold": 60, "message": "Added to watchlist"}
```

**Design Notes:**

* Command bar should be always accessible (sticky header or keyboard shortcut Ctrl+K).
* Ticker validation: Check if ticker exists via `get_market_context()` before adding.

**Deliverable:** `CommandBar.tsx` with ticker autocomplete and MCP integration.

---

### 5.7 Watchlist Maintenance: Edit Modal ‚úÖ SUPPORTED (Edit Only)

**Objective:** Allow editing of existing watchlist items.
**API Status:** `add_to_watchlist()` (for updates) and `remove_from_watchlist()` are available.

**Phase 1 Tasks:**

1. Create `WatchlistEditModal` component.
2. Triggered by clicking existing watchlist item.
3. Display form: Ticker (read-only), Alert Threshold (slider).
4. On save, call `add_to_watchlist()` to update threshold.
5. Add "Remove" button calling `remove_from_watchlist()`.

**Phase 2 Enhancements:**

1. üö´ Expiry Date - requires `expiry_date` property support.
2. üö´ Price level (Support/Resistance) - requires API enhancement.
3. üö´ Event type triggers - requires watchlist API enhancement.

**MCP Verification:**

* Same as 5.6 (update uses same endpoint).

**Design Notes:**

* Use Material UI `Slider` for threshold (0-100).
* Add "Remove" button ‚Üí calls `removeFromWatchlist()`.

**Deliverable:** `WatchlistEditModal.tsx` with update/delete functionality.

---

### 5.8 Panel C: Client-Specific News Feed ‚úÖ SUPPORTED

**Objective:** Display news filtered by client's portfolio and watchlist.
**API Status:** `get_client_feed()` is available with full filtering support.

**Tasks:**

1. Create `ClientNewsFeed` component.
2. Implement `getClientFeed()` API wrapper.
3. Display: Title, Impact Score, Impact Tier, Source, Date.
4. Add filters: Min Impact Score, Tiers (checkboxes).

**MCP Verification:**

```bash
# Get client feed
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":9,"method":"tools/call","params":{"name":"get_client_feed","arguments":{"client_guid":"<VALID_GUID>","limit":20,"min_impact_score":50,"impact_tiers":["GOLD","PLATINUM"],"include_portfolio":true,"include_watchlist":true,"auth_tokens":["'$TOKEN'"]}}}'
```

**Expected Data Shape:**

```json
{"articles": [{"guid": "uuid", "title": "...", "impact_score": 85, "impact_tier": "GOLD", "created_at": "2024-10-02T10:00:00Z", "source_name": "Bloomberg"}]}
```

**Design Notes:**

* Display as timeline/list with most recent first.
* Use tier color coding (see 5.5).
* Add "decay lambda" visualization (optional) to show signal fading.

**Deliverable:** `ClientNewsFeed.tsx` with filtered news stream.

---

### 5.9 Reverse Inquiry: "The Axe Sheet" üö´ ON HOLD

**Objective:** Show which clients hold or watch a given ticker.
**API Status:** ‚ùå **NOT FEASIBLE** - Requires N√ó2 API calls (N = number of clients). Backend needs dedicated `get_ticker_exposure(ticker)` API.

**Tasks:**

1. üö´ **BLOCKED:** No efficient API for reverse lookup.
2. **Alternative:** Use `explore_graph()` to traverse Neo4j relationships if exposed.
3. **Backend Request:** Implement `get_ticker_exposure(ticker)` that returns all clients holding/watching a ticker in one call.

**MCP Verification (Not Recommended - Too Expensive):**

```bash
# Get all clients
curl -s -X POST "http://gofr-iq-mcp:8080/mcp" \
  -H "Content-Type: application/json" \
  -H "Accept: application/json, text/event-stream" \
  -H "mcp-session-id: ${SESSION}" \
  -d '{"jsonrpc":"2.0","id":10,"method":"tools/call","params":{"name":"list_clients","arguments":{"auth_tokens":["'$TOKEN'"]}}}'

# For each client, get portfolio holdings
# (Repeat call from 5.3 for each client_guid)
```

**Design Notes:**

* This is computationally expensive (N clients √ó 2 API calls).
* **Optimization:** Backend should expose a dedicated `get_ticker_exposure()` tool that does this in Neo4j directly.
* **Fallback:** Client-side aggregation with caching.

**Deliverable:** `TickerLookup.tsx` with reverse client search.

---

### 5.10 Integration & Polish ‚úÖ SUPPORTED

**Objective:** Assemble all components into the "Client 360" view.
**API Status:** No new API calls required - integration of existing components.

**Tasks:**

1. Create `Client360View.tsx` as master layout.
2. Arrange: Header (top), Portfolio (left), Watchlist (right), News Feed (bottom).
3. Add responsive breakpoints (collapse to tabs on mobile).
4. Implement loading states and error boundaries.
5. Add keyboard shortcuts (e.g., `?` for help, `Ctrl+K` for command bar).

**Design Notes:**

* Use Material UI `Grid` for layout.
* Portfolio and Watchlist should be equal width (50/50 split).
* News Feed should be collapsible.

**Deliverable:** Fully integrated `Client360View.tsx`.

---

### 5.11 Testing & Validation ‚úÖ SUPPORTED

**Objective:** Verify all MCP interactions and UI flows.
**API Status:** Testing existing API integrations.

**Test Cases:**

1. \u2705 **Client Selection:** Click client in list \u2192 loads profile, portfolio, watchlist, news.
2. \u26a0\ufe0f **Quick-Add:** Type ticker from list (`BANKO`, `BLK`, etc.) in command bar \u2192 ticker added to watchlist. (No autocomplete validation)
3. \u2705 **Edit Watchlist:** Double-click ticker \u2192 modal opens \u2192 update threshold \u2192 saves.
4. \u2705 **News Filtering:** Set min impact to 80 \u2192 only GOLD/PLATINUM articles shown.
5. \ud83d\udeab **Reverse Lookup:** \u274c BLOCKED - Not implementable with current API.

**MCP Error Scenarios:**
* Invalid client_guid \u2192 Show "Client not found" message.
* Invalid ticker (not in simulated universe) \u2192 Show "Ticker not recognized" warning.
* Network timeout \u2192 Show retry button.

**Deliverable:** Test plan document with Phase 1 test cases only.

---

### 5.12 Performance Optimization ‚ö†Ô∏è PARTIAL

**Objective:** Reduce MCP call overhead and improve UX.
**API Status:** Client-side optimizations are feasible; backend batching is not available.

**Phase 1 Tasks:**

1. ‚úÖ Implement client-side caching (React Query or similar).
2. ‚úÖ Add pagination to news feed (client-side implementation).
3. ‚úÖ Debounce news impact checks to reduce API calls.

**Phase 2 Tasks:**

1. üö´ Batch portfolio/watchlist/news fetches - requires backend `get_client_360()` API.
2. üö´ Lazy load ticker autocomplete - requires `search_tickers()` API.

**Deliverable:** Performance report showing sub-500ms load times for Client 360 view.

---

## 6. MVP Scope (Current API Support)

### Phase 1 Implementation - READY NOW ‚úÖ

Based on current GOFR-IQ MCP API capabilities, the following features can be implemented immediately:

**Core Functionality:**
* Client list and profile display
* Portfolio holdings view (ticker, weight, shares, avg_cost)
* Watchlist items view (ticker, alert_threshold)
* Client-specific news feed with impact scoring
* News heatmap on portfolio holdings
* Basic watchlist add/remove operations

**Limitations:**
* No ticker autocomplete (use hardcoded list of 12 simulated tickers)
* No benchmark comparison
* No sector/region aggregation
* No reverse inquiry (ticker ‚Üí clients lookup)
* No watchlist expiry dates or price levels
* No ESG exclusion details

### Phase 2 Requirements - BLOCKED üö´

The following features require backend API enhancements and are **ON HOLD**:

**Blocked Features:**
* Reverse inquiry / "Axe Sheet" (ticker ‚Üí clients)
* Ticker autocomplete / search
* Watchlist themes/grouping
* Suggested tickers (recommendation engine)
* Sector/Region portfolio aggregation
* Benchmark vs. portfolio comparison
* ESG exclusion details (specific restricted companies/sectors)
* Watchlist expiry dates and price triggers
* Event-based watchlist alerts

---

## 7. MCP API Improvements (Backend Enhancements)

To enable Phase 2 features, the following MCP tools should be added or enhanced:

1. **`get_client_360(client_guid)`** - Single call to fetch profile + portfolio + watchlist + recent news.
2. **`get_ticker_exposure(ticker)`** - Returns all clients with positions/watchlist items for a ticker.
3. **`batch_get_instrument_news(tickers[], days_back)`** - Fetch news for multiple tickers in one call.
4. **`search_tickers(prefix)`** - Autocomplete support for ticker entry.

These enhancements will reduce client-side API call count by ~70% and improve responsiveness.

---

## 8. Summary: MVP vs. Full Vision

### What We Can Build Now (Phase 1 MVP)

**Client 360 Dashboard - Core Features:**

1. \u2705 Client selection from list
2. \u2705 Profile header (Name, Type, Mandate, ESG flag)
3. \u2705 Portfolio holdings table (Ticker, Weight, Shares, Avg Cost)
4. \u2705 News heatmap on holdings (visual impact indicators)
5. \u2705 Watchlist panel (Tickers with alert thresholds)
6. \u2705 Client-specific news feed (filtered by holdings + watchlist)
7. \u2705 Quick-add command bar (manual ticker entry)
8. \u2705 Watchlist edit modal (adjust alert threshold, remove ticker)

**User Workflow Supported:**
* Sales trader can view client profile and holdings
* Instantly see which holdings have recent high-impact news
* Add/remove tickers from watchlist
* Filter news by impact level
* Adjust alert thresholds per ticker

**Data Quality Note:**
* Current backend has invalid GUIDs in test data (`client-hedge-fund` instead of UUID). Frontend validates to prevent crashes.

---

### What's Missing (Phase 2 - Blocked)

**Critical Gap: Reverse Inquiry**
* \u274c Cannot answer "Who holds TSLA?" without N\u00d72 API calls
* \u274c No "Axe Sheet" functionality
* **Impact:** Sales traders cannot efficiently discover which clients care about breaking news on a specific ticker.

**UX Enhancements Blocked:**
* \u274c Ticker autocomplete (no search API)
* \u274c Watchlist themes/grouping
* \u274c Suggested tickers (recommendation engine)
* \u274c Portfolio sector/region aggregation
* \u274c Benchmark comparison
* \u274c Drag-and-drop between panels
* \u274c Watchlist expiry dates
* \u274c Price-level triggers (support/resistance)
* \u274c Event-based alerts (earnings, M&A)
* \u274c Specific ESG exclusion details

**Compliance/Risk Features Blocked:**
* \u274c Cannot show "Client cannot trade Tobacco stocks" (only generic ESG flag)
* \u274c Cannot show benchmark tracking error

---

### Recommendation

**Proceed with Phase 1 MVP** - The core workflow (Client ‚Üí Portfolio ‚Üí News ‚Üí Watchlist View/Edit) is implementable with the caveat that **adding new watchlist items must be done via backend tools or API calls** outside the UI.

**Phase 1 provides:**
* Read-only portfolio view with news impact visualization
* Watchlist viewing and threshold editing
* Client-specific news filtering

**Phase 1 does NOT provide:**
* Ability to add new tickers to watchlist from UI (blocks primary workflow)

**Prioritize Backend API for Phase 2 (in order):**

1. `search_tickers(prefix)` - **CRITICAL** - Unblocks watchlist add functionality
2. `get_ticker_exposure(ticker)` - Enables Reverse Inquiry ("Axe Sheet")
3. `get_client_360(client_guid)` - Performance optimization (batch fetch)
4. `get_client_exclusions(client_guid)` - Compliance safety

**Estimated Timeline:**
* Phase 1 MVP: 2-3 weeks (frontend only)
* Phase 2 Backend APIs: 2 weeks (backend team)
* Phase 2 Frontend: 1-2 weeks (integration)

---

**Implementation Status:**
* \u2705 **Phase 1 (MVP):** READY FOR DEVELOPMENT
* \ud83d\udeab **Phase 2 (Full Feature Set):** BLOCKED - Awaiting backend API enhancements
