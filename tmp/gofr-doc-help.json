{
    "status": "success",
    "data": {
        "service_name": "gofr-doc-document-service",
        "version": "1.21.0",
        "workflow_overview": "WORKFLOW: DISCOVERY \u2192 SESSION \u2192 CONFIG \u2192 BUILD \u2192 RENDER\n1. DISCOVERY: list_templates, get_template_details, list_template_fragments\n2. SESSION: create_document_session\n3. CONFIG: set_global_parameters (title, author, etc.)\n4. BUILD: add_fragment repeatedly\n5. RENDER: get_document (HTML/PDF/Markdown)\n\nSECURITY: JWT Bearer token required for sessions. Group-isolated: you only see YOUR sessions.\nDiscovery tools (list_templates, get_template_details, list_styles) do NOT need auth.",
        "guid_persistence": "\u26a0\ufe0f CRITICAL: UUID HANDLING (36-char format only)\nFormat: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx | Example: 61ea2281-c8df-4719-b71e-56a1305352cc\n\u2713 Copy/paste EXACT | \u2717 Never retype (b71e \u2260 b77e) | \u2717 Never truncate | Case-sensitive\n\nTHREE GUID TYPES:\n1. session_id: Document config (reusable, save immediately after create_document_session)\n2. fragment_instance_guid: Unique per add_fragment call (use to remove specific fragments)\n3. proxy_guid: One specific rendered output (DIFFERENT from session_id!)\n\nPROXY MODE (session_id \u2260 proxy_guid):\nsession_id = recipe (reusable) | proxy_guid = baked cake (one specific render)\nOne session \u2192 many proxy_guids (different formats/styles)\nDownload: GET /proxy/{proxy_guid} with Authorization header (NOT /proxy/{session_id}!)",
        "common_pitfalls": [
            "\u274c Not saving session_id immediately after create_document_session",
            "\u274c Retyping/modifying UUIDs (b71e \u2260 b77e) or truncating them (61ea2281-... invalid)",
            "\u274c Global parameters AFTER fragments (must be BEFORE) | \u274c Wrong parameter names",
            "\u274c Confusing session_id (config/reusable) with proxy_guid (rendered/one-time)",
            "\u274c Downloading proxy via /proxy/{session_id} instead of /proxy/{proxy_guid}",
            "\u274c Missing Authorization header on proxy downloads",
            "\u274c TABLE: Widths total >100% | 1-based indices (use 0-based) | Capitalized colors",
            "\u274c TABLE: Missing # in hex | Wrong format ('USD' not 'currency:USD') | sort_by column name when no header",
            "\u274c IMAGE: Not testing URL in browser first | Behind login | Missing image/* Content-Type",
            "\u274c IMAGE: HTTP without require_https=false | Both width AND height (distorts) | >10MB"
        ],
        "example_workflows": [
            {
                "name": "QUICK START: Create & Render Document",
                "steps": [
                    "1. list_templates() \u2192 Pick a template_id",
                    "2. create_document_session(template_id='...') \u2192 Save session_id",
                    "3. set_global_parameters(session_id='...', parameters={title: '...', author: '...'})",
                    "4. add_fragment(session_id='...', fragment_id='heading', parameters={text: '...'})",
                    "5. add_fragment(session_id='...', fragment_id='paragraph', parameters={text: '...'})",
                    "6. get_document(session_id='...', format='html') \u2192 Get HTML directly",
                    "",
                    "ALTERNATIVE (for large docs):",
                    "6. get_document(session_id='...', format='pdf', proxy=true) \u2192 Save proxy_guid",
                    "7. GET /proxy/{proxy_guid} with Authorization header \u2192 Download PDF from web"
                ]
            },
            {
                "name": "Validate Before Adding",
                "steps": [
                    "validate_parameters(template_id='...', parameter_type='global', parameters={...})",
                    "validate_parameters(template_id='...', parameter_type='fragment', fragment_id='...', parameters={...})",
                    "Only call add_fragment/set_global_parameters if is_valid=true"
                ]
            },
            {
                "name": "Table with Formatting",
                "steps": [
                    "create_document_session \u2192 set_global_parameters \u2192 add_fragment with:",
                    "  rows: [[...]], has_header: true, column_widths: {0: '40%', 1: '30%', 2: '30%'},",
                    "  column_alignments: ['left','right','right'],",
                    "  number_format: {1: 'currency:USD', 2: 'decimal:2'},",
                    "  header_color: 'primary', zebra_stripe: true"
                ]
            },
            {
                "name": "Add Images",
                "steps": [
                    "1. Test image URL in browser first (must show Content-Type: image/*)",
                    "2. add_image_fragment(session_id='...', image_url='https://...', width=600, alignment='center')",
                    "3. If error, check error_code: INVALID_IMAGE_URL (use HTTPS), IMAGE_URL_NOT_ACCESSIBLE (check if public)",
                    "4. INVALID_IMAGE_CONTENT_TYPE (wrong format), IMAGE_TOO_LARGE (compress)"
                ]
            }
        ],
        "tool_sequence": [
            {
                "category": "DISCOVERY",
                "tools": [
                    "ping",
                    "list_templates",
                    "get_template_details",
                    "list_template_fragments",
                    "get_fragment_details",
                    "list_styles"
                ]
            },
            {
                "category": "SESSION",
                "tools": [
                    "create_document_session",
                    "list_active_sessions",
                    "get_session_status",
                    "abort_document_session"
                ]
            },
            {
                "category": "VALIDATION",
                "tools": [
                    "validate_parameters"
                ]
            },
            {
                "category": "BUILD",
                "tools": [
                    "set_global_parameters",
                    "add_fragment",
                    "add_image_fragment",
                    "remove_fragment",
                    "list_session_fragments"
                ]
            },
            {
                "category": "RENDER",
                "tools": [
                    "get_document"
                ]
            }
        ],
        "authoring_guide": "HOW TO CREATE TEMPLATES, FRAGMENTS & STYLES\n============================================\n\nAll content lives under data/{templates,fragments,styles}/<group>/.\nThe <group> directory name controls access isolation (e.g. public, team1).\n\n\u2500\u2500 TEMPLATE \u2500\u2500\nDirectory: data/templates/<group>/<template_id>/\nRequired files:\n  template.yaml          - Schema: metadata + global_parameters + fragments list\n  document.html.jinja2   - Outer HTML wrapper (receives {{ title }}, {{ css }}, {{ fragments }})\n  fragments/             - One .html.jinja2 per fragment declared in the YAML\n\ntemplate.yaml skeleton:\n  metadata:\n    template_id: my_report     # must match directory name\n    group: public              # must match parent group directory\n    name: My Report\n    description: A custom report template\n  global_parameters:\n    - {name: title, type: string, required: true}\n    - {name: author, type: string, required: false}\n  fragments:\n    - fragment_id: paragraph\n      name: Paragraph\n      parameters:\n        - {name: text, type: string, required: true}\n\ndocument.html.jinja2 minimal example:\n  <html><head><style>{{ css }}</style></head>\n  <body><h1>{{ title }}</h1>\n  {% for f in fragments %}{{ f.html|safe }}{% endfor %}\n  </body></html>\n\nfragments/paragraph.html.jinja2:\n  <div class=\"fragment-paragraph\"><p>{{ text }}</p></div>\n\n\u2500\u2500 STANDALONE FRAGMENT \u2500\u2500\nDirectory: data/fragments/<group>/<fragment_id>/\nRequired files:\n  fragment.yaml          - Schema: fragment_id, group, name, description, parameters\n  fragment.html.jinja2   - Jinja2 template (receives declared parameters as variables)\n\nfragment.yaml skeleton:\n  fragment_id: callout        # must match directory name\n  group: public               # must match parent group directory\n  name: Callout Box\n  description: A highlighted callout\n  parameters:\n    - {name: text, type: string, required: true}\n    - {name: style, type: string, required: false, default: info}\n\n\u2500\u2500 STYLE \u2500\u2500\nDirectory: data/styles/<group>/<style_id>/\nRequired files:\n  style.yaml   - Metadata: style_id, group, name, description\n  style.css    - CSS injected into documents via {{ css }}\n\nRULES:\n\u2022 template_id / fragment_id / style_id MUST match their directory name\n\u2022 group field in YAML MUST match the parent group directory name\n\u2022 Parameter types: string | integer | number | boolean | array | object\n\u2022 Restart the service after adding new content (registries scan at startup)"
    }
}